% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RAFALE.R
\name{RAFALE}
\alias{RAFALE}
\title{RAFALE}
\description{
Classe R6 pour scrapper des APIs paginées avec gestion du débit, des erreurs et de la persistance.
}
\details{
\describe{
\item{\code{initialize(url, mailto = NULL, query = list(), per_page = 200, max_pages = Inf, rate_per_sec = 10, max_daily = 1e5, fallback_file = "results.rds")}}{Initialise un nouvel objet RAFALE.}
\item{\code{check_daily_limit()}}{Vérifie et incrémente le compteur de requêtes quotidiennes. Stoppe si la limite est dépassée.}
\item{\code{log_error(msg)}}{Ajoute un message d'erreur au fichier de log.}
\item{\code{fetch_json(query, max_tries = 3)}}{Effectue une requête GET sur l'API, gère les erreurs et retourne le JSON.}
\item{\code{build_query(page)}}{Construit la liste des paramètres de requête pour une page donnée.}
\item{\code{get_start_page()}}{Retourne la page de reprise (1 si aucune sauvegarde).}
\item{\code{save_progress(page, data)}}{Sauvegarde la progression (page courante et données).}
\item{\code{clear_progress()}}{Efface la sauvegarde de progression.}
\item{\code{scrape(show_progress = TRUE)}}{Scrappe toutes les pages de l'API, gère la persistance et retourne un tibble.}
}
}
\section{Fields}{

\describe{
\item{\code{url}}{URL de l'API à interroger.}

\item{\code{mailto}}{Adresse mail à inclure dans la requête (optionnel).}

\item{\code{query}}{Liste de paramètres de requête additionnels.}

\item{\code{per_page}}{Nombre d'éléments par page.}

\item{\code{max_pages}}{Nombre maximal de pages à récupérer.}

\item{\code{rate_per_sec}}{Nombre maximal de requêtes par seconde.}

\item{\code{max_daily}}{Nombre maximal de requêtes par jour.}

\item{\code{fallback_file}}{Fichier de sauvegarde des résultats.}

\item{\code{page_file}}{Fichier de sauvegarde de la dernière page atteinte.}

\item{\code{log_file}}{Fichier de log des erreurs.}

\item{\code{min_delay}}{Délai minimal entre deux requêtes.}

\item{\code{count}}{Compteur de requêtes du jour.}

\item{\code{date}}{Date du dernier reset du compteur.}
}}

\section{Méthodes publiques }{

}

\examples{
\dontrun{
scraper <- RAFALE$new(url = "https://api.exemple.com/data")
data <- scraper$scrape()
}

}
